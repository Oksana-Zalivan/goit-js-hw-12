{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '53371972-407ae4137ffe2ff2cf6f525d2';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const PER_PAGE = 15;\n\nexport async function getImagesByQuery(query, page) {\n    const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: PER_PAGE,\n    page,\n    };\n\n    const response = await axios.get('/', { params });\n    return response.data; \n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryEl = document.querySelector('.gallery');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreBtnEl = document.querySelector('.load-more');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nexport function createGallery(images) {\n    const markup = images\n    .map(\n        ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n        }) => {\n        return `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n            </a>\n            <div class=\"info\">\n                <p><b>Likes</b> ${likes}</p>\n                <p><b>Views</b> ${views}</p>\n                <p><b>Comments</b> ${comments}</p>\n                <p><b>Downloads</b> ${downloads}</p>\n            </div>\n        </li>`;\n        }\n    )\n    .join('');\n\n    galleryEl.insertAdjacentHTML('beforeend', markup);\n\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    galleryEl.innerHTML = '';\n}\n\nexport function showLoader() {\n    loaderEl.classList.remove('is-hidden');\n}\n\nexport function hideLoader() {\n    loaderEl.classList.add('is-hidden');\n}\n\nexport function showLoadMoreButton() {\n    loadMoreBtnEl.classList.remove('is-hidden');\n}\n\nexport function hideLoadMoreButton() {\n    loadMoreBtnEl.classList.add('is-hidden');\n}\n","import { getImagesByQuery, PER_PAGE } from './js/pixabay-api.js';\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton,\n} from './js/render-functions.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet searchQuery = '';\nlet page = 1;\nlet totalHits = 0;\n\nform.addEventListener('submit', onFormSubmit);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onFormSubmit(event) {\n    event.preventDefault();\n\n    const newQuery = event.target.elements['search-text'].value.trim();\n\n    if (!newQuery) {\n    iziToast.warning({\n        title: 'Ð£Ð²Ð°Ð³Ð°',\n        message: 'Ð’Ð²ÐµÐ´Ð¸, Ð±ÑƒÐ´ÑŒ Ð»Ð°ÑÐºÐ°, Ð¿Ð¾ÑˆÑƒÐºÐ¾Ð²Ð¸Ð¹ Ð·Ð°Ð¿Ð¸Ñ‚ ðŸ™‚',\n        position: 'topRight',\n    });\n    return;\n    }\n\n    searchQuery = newQuery;\n    page = 1;\n    totalHits = 0;\n\n    clearGallery();\n    hideLoadMoreButton();\n\n    await fetchImages({ isNewSearch: true });\n\n    form.reset();\n}\n\nasync function onLoadMore() {\n    await fetchImages({ isNewSearch: false });\n}\n\nasync function fetchImages({ isNewSearch }) {\n    showLoader();\n    hideLoadMoreButton();\n\n    try {\n        const data = await getImagesByQuery(searchQuery, page);\n        const { hits, totalHits: apiTotalHits } = data;\n\n    if (isNewSearch) {\n        if (!hits.length) {\n            clearGallery();\n            iziToast.info({\n                title: 'ÐÑ–Ñ‡Ð¾Ð³Ð¾ Ð½Ðµ Ð·Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾',\n                message: 'Ð¡Ð¿Ñ€Ð¾Ð±ÑƒÐ¹ Ñ–Ð½ÑˆÐ¸Ð¹ Ð·Ð°Ð¿Ð¸Ñ‚ ðŸ˜‰',\n                position: 'topRight',\n            });\n            return;\n        }\n\n        totalHits = apiTotalHits;\n    }\n\n    if (!hits.length) {\n        hideLoadMoreButton();\n        iziToast.info({\n            title: 'Ð£Ð¿Ñ',\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight',\n        });\n        return;\n    }\n\n    createGallery(hits);\n\n    if (page > 1) {\n        smoothScrollGallery();\n    }\n\n    const totalPages = Math.ceil(totalHits / PER_PAGE);\n\n    if (page < totalPages) {\n        showLoadMoreButton();\n    } else {\n        hideLoadMoreButton();\n        iziToast.info({\n            title: 'ÐšÑ–Ð½ÐµÑ†ÑŒ ÐºÐ¾Ð»ÐµÐºÑ†Ñ–Ñ—',\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight',\n        });\n    }\n\n    page += 1;\n    } catch (error) {\n        iziToast.error({\n            title: 'ÐŸÐ¾Ð¼Ð¸Ð»ÐºÐ°',\n            message:\n            'Ð¡Ñ‚Ð°Ð»Ð°ÑÑ Ð¿Ð¾Ð¼Ð¸Ð»ÐºÐ° Ð¿Ñ–Ð´ Ñ‡Ð°Ñ Ð·Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶ÐµÐ½Ð½Ñ. Ð¡Ð¿Ñ€Ð¾Ð±ÑƒÐ¹ Ñ‰Ðµ Ñ€Ð°Ð· Ð¿Ñ–Ð·Ð½Ñ–ÑˆÐµ.',\n        position: 'topRight',\n        });\n    } finally {\n    hideLoader();\n    }\n}\n\nfunction smoothScrollGallery() {\n    const firstCard = document.querySelector('.gallery-item');\n    if (!firstCard) return;\n\n    const { height: cardHeight } = firstCard.getBoundingClientRect();\n\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}\n"],"names":["API_KEY","axios","PER_PAGE","getImagesByQuery","query","page","params","galleryEl","loaderEl","loadMoreBtnEl","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","loadMoreBtn","searchQuery","totalHits","onFormSubmit","onLoadMore","event","newQuery","iziToast","fetchImages","isNewSearch","data","hits","apiTotalHits","smoothScrollGallery","totalPages","firstCard","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,qCAChBC,EAAM,SAAS,QAAU,2BAElB,MAAMC,EAAW,GAEjB,eAAeC,EAAiBC,EAAOC,EAAM,CAChD,MAAMC,EAAS,CACf,IAAKN,EACL,EAAGI,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUF,EACV,KAAAG,CACJ,EAGI,OADiB,MAAMJ,EAAM,IAAI,IAAK,CAAE,OAAAK,CAAM,CAAE,GAChC,IACpB,CCjBA,MAAMC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAW,SAAS,cAAc,SAAS,EAC3CC,EAAgB,SAAS,cAAc,YAAY,EAEnDC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAClB,CAAC,EAEM,SAASC,EAAcC,EAAQ,CAClC,MAAMC,EAASD,EACd,IACG,CAAC,CACD,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA;AAAA,4CAE6BL,CAAa;AAAA,kDACPD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,kCAG1CC,CAAK;AAAA,kCACLC,CAAK;AAAA,qCACFC,CAAQ;AAAA,sCACPC,CAAS;AAAA;AAAA,cAI1C,EACA,KAAK,EAAE,EAERd,EAAU,mBAAmB,YAAaO,CAAM,EAEhDJ,EAAS,QAAO,CACpB,CAEO,SAASY,GAAe,CAC3Bf,EAAU,UAAY,EAC1B,CAEO,SAASgB,GAAa,CACzBf,EAAS,UAAU,OAAO,WAAW,CACzC,CAEO,SAASgB,GAAa,CACzBhB,EAAS,UAAU,IAAI,WAAW,CACtC,CAEO,SAASiB,GAAqB,CACjChB,EAAc,UAAU,OAAO,WAAW,CAC9C,CAEO,SAASiB,GAAqB,CACjCjB,EAAc,UAAU,IAAI,WAAW,CAC3C,CClDA,MAAMkB,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIC,EAAc,GACdxB,EAAO,EACPyB,EAAY,EAEhBH,EAAK,iBAAiB,SAAUI,CAAY,EAC5CH,EAAY,iBAAiB,QAASI,CAAU,EAEhD,eAAeD,EAAaE,EAAO,CAC/BA,EAAM,eAAc,EAEpB,MAAMC,EAAWD,EAAM,OAAO,SAAS,aAAa,EAAE,MAAM,OAE5D,GAAI,CAACC,EAAU,CACfC,EAAS,QAAQ,CACb,MAAO,QACP,QAAS,wCACT,SAAU,UAClB,CAAK,EACD,MACC,CAEDN,EAAcK,EACd7B,EAAO,EACPyB,EAAY,EAEZR,IACAI,IAEA,MAAMU,EAAY,CAAE,YAAa,EAAM,CAAA,EAEvCT,EAAK,MAAK,CACd,CAEA,eAAeK,GAAa,CACxB,MAAMI,EAAY,CAAE,YAAa,EAAO,CAAA,CAC5C,CAEA,eAAeA,EAAY,CAAE,YAAAC,GAAe,CACxCd,IACAG,IAEA,GAAI,CACA,MAAMY,EAAO,MAAMnC,EAAiB0B,EAAaxB,CAAI,EAC/C,CAAE,KAAAkC,EAAM,UAAWC,CAAY,EAAKF,EAE9C,GAAID,EAAa,CACb,GAAI,CAACE,EAAK,OAAQ,CACdjB,IACAa,EAAS,KAAK,CACV,MAAO,qBACP,QAAS,yBACT,SAAU,UAC1B,CAAa,EACD,MACH,CAEDL,EAAYU,CACf,CAED,GAAI,CAACD,EAAK,OAAQ,CACdb,IACAS,EAAS,KAAK,CACV,MAAO,MACP,QAAS,6DACT,SAAU,UACtB,CAAS,EACD,MACH,CAEDvB,EAAc2B,CAAI,EAEdlC,EAAO,GACPoC,IAGJ,MAAMC,EAAa,KAAK,KAAKZ,EAAY5B,CAAQ,EAE7CG,EAAOqC,EACPjB,KAEAC,IACAS,EAAS,KAAK,CACV,MAAO,kBACP,QAAS,6DACT,SAAU,UACtB,CAAS,GAGL9B,GAAQ,CACP,MAAe,CACZ8B,EAAS,MAAM,CACX,MAAO,UACP,QACA,gEACJ,SAAU,UAClB,CAAS,CACT,QAAc,CACVX,GACC,CACL,CAEA,SAASiB,GAAsB,CAC3B,MAAME,EAAY,SAAS,cAAc,eAAe,EACxD,GAAI,CAACA,EAAW,OAEhB,KAAM,CAAE,OAAQC,CAAY,EAAGD,EAAU,sBAAqB,EAE9D,OAAO,SAAS,CACZ,IAAKC,EAAa,EAClB,SAAU,QAClB,CAAK,CACL"}